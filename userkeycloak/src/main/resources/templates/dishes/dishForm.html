<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dish form</title>
</head>
<body>

<h1>New dish design</h1>
<div>
    <form th:object="${dish}" th:action="@{'/dish/new'}" method="post">
        <fieldset>
            <legend>Dish:</legend>
            <input type="hidden" th:field="*{id}"/>

            <div>
                <label>Dish name:</label>
                <input type="text" th:field="*{name}">
            </div>
            <div>
                <label>Dish cost:</label>
                <input type="number"  step="0.01" th:field="*{cost}">
            </div>
            <div>
                <label>Dish size:</label>
                <input type="number"  step="0.01" th:field="*{size}">
            </div>

            <td><a href="#" th:href="@{ '/ingredients/new'}">Add new ingredient</a></td>

        <p>Ingredients:</p>
        <table>
            <thead>
            <tr>
                <th>id</th>
                <th>name</th>
                <th>cost</th>
                <th>quantity</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="ingredient,stat: ${dish.ingredientCommands}">
                <td th:text="${ingredient.id}"></td>
                <input type="hidden"  th:field="*{ingredientCommands[__${stat.index}__].id}"/>
                <td th:text="${ingredient.name}"></td>
                <input type="hidden"  th:field="*{ingredientCommands[__${stat.index}__].name}"/>
                <td th:text="${ingredient.cost}"></td>
                <input type="hidden"  th:field="*{ingredientCommands[__${stat.index}__].cost}"/>

                <td> <input type="number"  th:field="*{ingredientCommands[__${stat.index}__].quantity}"/></td>
            </tr>
            </tbody>
        </table>

            <button type="submit" >Submit</button>
        </fieldset>
    </form>

</div>


</body>
</html>